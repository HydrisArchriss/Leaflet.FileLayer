<!DOCTYPE html>
<html>
<head>
    <title>Leaflet.FileLayer</title>
    <link rel="stylesheet" href="node_modules/normalize.css/normalize.css" />
    <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css"/>

</head>
<body>
    <header>
        <h1>Leaflet Filelayer plugin</h1>
        <div class="infos">
            <a class="sources" href="http://github.com/makinacorpus/Leaflet.FileLayer/">Sources</a>
            <a class="logo" href="http://makina-corpus.com"><img class="icon" src="http://depot.makina-corpus.org/public/logo.gif" alt="Makina Corpus logo"/></a>
        </div>
    </header>
    <main>
        <p class="help">Click on the icon to browse and load local files on the map.
        </p>
        <div id="map"></div>
    </main>
    <footer>
        <div>Icons made by <a href="http://www.freepik.com" title="Freepik">Freepik</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a></div>
    </footer>
</body>
<script src="node_modules/leaflet/dist/leaflet.js"></script>
<script src="node_modules/togeojson/togeojson.js"></script>
<script src="node_modules/leaflet-filelayer/src/leaflet.filelayer.js"></script>
<script type="text/javascript">
        (function (window) {
            'use strict';

            function initMap() {
                var control;
                var L = window.L;
                var osm = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: 'Map data &copy; 2013 OpenStreetMap contributors'
                });
                var map = L.map('map', {
                    center: [0, 0],
                    zoom: 2
                }).addLayer(osm);
                var style = {
                    color: 'red',
                    opacity: 1.0,
                    fillOpacity: 1.0,
                    weight: 2,
                    clickable: false
                };
                L.Control.FileLayerLoad.LABEL = '<img class="icon" src="./folder.svg" alt="file icon"/>';
                control = L.Control.fileLayerLoad({
                    fitBounds: true,
                    layerOptions: {
                        style: style,
                        pointToLayer: function (data, latlng) {
                            return L.circleMarker(
                                latlng,
                                { style: style }
                            );
                        }
                    }
                });
                control.addTo(map);
                control.loader.on('data:loaded', function (e) {
                    var layer = e.layer;
                    console.log(layer);
                });
            }

            window.addEventListener('load', function () {
                initMap();
            });
        }(window));
    </script>
</html>
